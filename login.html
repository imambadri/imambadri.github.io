<!DOCTYPE html>
<html lang="id">
<head>
<title>AFR-Cloud.NET > Login</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="expires" content="-1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<link rel="stylesheet" href="style.css">
<style>
    .mode-selector {
        display: flex;
        width: 100%;
        margin-bottom: 15px;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #ddd;
    }
    .btn-mode {
        flex: 1;
        padding: 10px;
        border: none;
        background-color: #f0f0f0;
        cursor: pointer;
        font-weight: bold;
        color: #555;
        transition: background-color 0.3s;
    }
    .btn-mode.active {
        background-color: #0ea5e9;
        color: white;
    }
</style>
</head>

<body>
<div id="loading-overlay" class="loading-screen">
  <div class="loading-spinner"></div>
</div>

<div class="main-container">
<div class="content-container">
    <header class="header">
        <div class="logo-container">
            <svg class="logo-icon" width="54" height="54" viewBox="0 0 24 24" fill="none" stroke="url(#gradient)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>
                <defs><linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#0EA5E9" /><stop offset="100%" stop-color="#8B5CF6" /></linearGradient></defs>
            </svg>
            <p class="site-title">AFRCloud.NET</p>
            <div class="gradient-line"></div>
            <p class="site-subtitle">Unlimited Internet Hotspot</p>
        </div>
    </header>

    <div class="main-card">
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="login">
                <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" /><polyline points="10 17 15 12 10 7" /><line x1="15" x2="3" y1="12" y2="12" /></svg>
                Login
            </div>
            <div class="nav-tab" data-tab="paket">
                <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m7.5 4.27 9 5.15" /><path d="m7.5 19.73 9-5.15" /><path d="M11.29 16.43 2.5 11 11.29 5.57c.53-.31 1.2-.31 1.73 0L21.5 11l-8.79 5.43c-.53.31-1.2.31-1.73 0Z" /><path d="m2.5 11 9 5.15" /><path d="m12.71 16.43 8.79-5.43" /></svg>
                Paket
            </div>
            <div class="tab-indicator"></div>
        </div>

        <div id="login-content" class="tab-content active">
            <div class="clock-widget"><div class="time-display" id="current-time"></div><div class="date-display" id="current-date"></div></div>
            <div id="error-message" class="login-info danger" style="display: none;"><svg class="info-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10" /><line x1="12" y1="8" y2="12" /><line x1="12" x2="12.01" y1="16" y2="16" /></svg> <span class="info-text" id="error-text"></span></div>

            <div id="login-section">
                <div class="mode-selector">
                    <button id="btnVoucher" class="btn-mode active">Voucher</button>
                    <button id="btnMember" class="btn-mode">Member</button>
                </div>
                <div id="info-box" class="login-info">
                    <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10" /><path d="M12 16v-4" /><path d="M12 8h.01" /></svg>
                    <span class="info-text" id="info-text">Masukkan Kode Voucher kemudian klik login.</span>
                </div>

                <form name="login" action="$(link-login-only)" method="post" class="login-form" $(if chap-id) onSubmit="return doLogin()" $(endif)>
                    <input type="hidden" name="dst" value="$(link-orig)" />
                    <input type="hidden" name="popup" value="true" />
                    <div class="form-group">
                        <input type="text" name="username" class="form-control" placeholder="Masukkan kode voucher di sini" required />
                        <input type="password" name="password" class="form-control" placeholder="Password" style="display: none; margin-top: 10px;"/>
                    </div>
                    <button type="submit" class="btn btn-primary btn-ripple"><svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></svg> MASUK</button>
                </form>

                $(if trial == 'yes')
                <div style="text-align: center; margin-top: 15px;">
                    Coba gratis <a style="text-decoration: underline; color:#8B5CF6; font-weight: bold;" href="$(link-login-only)?dst=$(link-orig-esc)&amp;username=T-$(mac-esc)">klik di sini</a>
                </div>
                $(endif)
            </div>

            <div id="status-section" style="display: none;">
                <div class="clock-widget">
                    <h3 class="time-display">Anda Terhubung!</h3>
                    <p class="date-display">Uptime: <span id="status-uptime"></span></p>
                    <p class="date-display">Data Masuk: <span id="status-bytes-in"></span></p>
                    <p class="date-display">Data Keluar: <span id="status-bytes-out"></span></p>
                </div>
                <form action="$(link-logout)" method="post" class="login-form">
                    <button type="submit" class="btn btn-primary btn-ripple"><svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" /><polyline points="16 17 21 12 16 7" /><line x1="21" x2="9" y1="12" y2="12" /></svg> LOGOUT</button>
                </form>
            </div>
        </div>

        <div id="paket-content" class="tab-content">
            <h2 class="prayer-times-title">Pilih Paket Internet</h2>
            <div class="package-list">
                <div class="package-card">
                    <div class="package-info">
                        <div class="package-header"><div class="package-name">6JAM</div><div class="package-details">Unlimited • 6 Jam</div></div><div class="package-price">Rp 2.000</div>
                    </div>
                    <div class="package-action"><a href="https://wa.me/6287838981858?text=Beli%206JAM" target="_blank" class="btn btn-whatsapp">Beli</a></div>
                </div>
                <div class="package-card">
                    <div class="package-info">
                        <div class="package-header"><div class="package-name">12JAM</div><div class="package-details">Unlimited • 12 Jam</div></div><div class="package-price">Rp 3.000</div>
                    </div>
                    <div class="package-action"><a href="https://wa.me/6287838981858?text=Beli%2012JAM" target="_blank" class="btn btn-whatsapp">Beli</a></div>
                </div>
                <div class="package-card">
                    <div class="package-info">
                        <div class="package-header"><div class="package-name">18JAM</div><div class="package-details">Unlimited • 18 Jam</div></div><div class="package-price">Rp 4.000</div>
                    </div>
                    <div class="package-action"><a href="https://wa.me/6287838981858?text=Beli%2018JAM" target="_blank" class="btn btn-whatsapp">Beli</a></div>
                </div>
                <div class="package-card">
                    <div class="package-info">
                        <div class="package-header"><div class="package-name">1HARI</div><div class="package-details">Unlimited • 1 Hari</div></div><div class="package-price">Rp 5.000</div>
                    </div>
                    <div class="package-action"><a href="https://wa.me/6287838981858?text=Beli%201HARI" target="_blank" class="btn btn-whatsapp">Beli</a></div>
                </div>
            </div>
        </div>
    </div>

    <input type="hidden" id="mikrotik-logged-in" value="$(logged-in)">
    <input type="hidden" id="mikrotik-error" value="$(error)">
    <input type="hidden" id="mikrotik-uptime" value="$(uptime)">
    <input type="hidden" id="mikrotik-bytes-in" value="$(bytes-in-nice)">
    <input type="hidden" id="mikrotik-bytes-out" value="$(bytes-out-nice)">

    $(if chap-id)
      <form name="sendin" action="$(link-login-only)" method="post">
          <input type="hidden" name="username" /><input type="hidden" name="password" />
          <input type="hidden" name="dst" value="$(link-orig)" /><input type="hidden" name="popup" value="true" />
      </form>
      <script type="text/javascript" src="md5.js"></script>
      <script type="text/javascript">
          function doLogin() {
              document.sendin.username.value = document.login.username.value;
              document.sendin.password.value = hexMD5('$(chap-id)' + document.login.password.value + '$(chap-challenge)');
              document.sendin.submit();
              return false;
          }
      </script>
    $(endif)
</div>
</div>

<footer class="cool-footer">
    <div class="footer-content">
        <div class="footer-left">
            <div class="footer-logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="url(#gradient)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12.55a11 11 0 0 1 14.08 0"></path>
                    <path d="M1.42 9a16 16 0 0 1 21.16 0"></path>
                    <path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path>
                    <line x1="12" y1="20" x2="12.01" y2="20"></line>
                </svg>
                <span class="logo-text">AFRCloud.NET</span>
            </div>
        </div>
        <div class="footer-bottom">
            <div class="copyright">
                &copy; <span id="current-year"></span> All rights reserved.
            </div>
            <div class="footer-legal">
                <a href="#" class="legal-link">Terms of Service</a>
                <span class="separator">|</span>
                <a href="#" class="legal-link">Privacy Policy</a>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
    // --- Elemen-elemen yang akan dimanipulasi ---
    const usernameInput = document.login.username;
    const passwordInput = document.login.password;
    const infoText = document.getElementById('info-text');
    const btnVoucher = document.getElementById('btnVoucher');
    const btnMember = document.getElementById('btnMember');
    const loginSection = document.getElementById('login-section');
    const statusSection = document.getElementById('status-section');
    
    // ================== FUNGSI UNTUK MODE VOUCHER & MEMBER ==================

    // Fungsi untuk beralih ke mode VOUCHER
    function switchToVoucherMode() {
        passwordInput.style.display = 'none'; // Sembunyikan field password
        passwordInput.value = ''; // Kosongkan nilainya
        usernameInput.placeholder = 'Masukkan Kode Voucher';
        infoText.innerText = 'Masukkan Kode Voucher kemudian klik login.';
        usernameInput.onkeyup = setPasswordAsUsername; // AKTIFKAN auto-copy
        
        // Atur style tombol aktif
        btnVoucher.classList.add('active');
        btnMember.classList.remove('active');
        usernameInput.focus();
    }

    // Fungsi untuk beralih ke mode MEMBER
    function switchToMemberMode() {
        passwordInput.style.display = 'block'; // TAMPILKAN field password
        usernameInput.placeholder = 'Masukkan Username Member';
        infoText.innerText = 'Masukkan Username & Password Member.';
        usernameInput.onkeyup = null; // MATIKAN auto-copy
        passwordInput.value = ''; // Kosongkan password
        
        // Atur style tombol aktif
        btnMember.classList.add('active');
        btnVoucher.classList.remove('active');
        usernameInput.focus();
    }
    
    // Fungsi yang menyalin username ke password (HANYA UNTUK VOUCHER)
    function setPasswordAsUsername() {
        passwordInput.value = usernameInput.value;
    }

    // Tambahkan event listener ke tombol
    btnVoucher.addEventListener('click', switchToVoucherMode);
    btnMember.addEventListener('click', switchToMemberMode);


    // --- Inisialisasi awal halaman ---
    document.getElementById('loading-overlay').style.display = 'none';
    usernameInput.focus();
    
    // Atur halaman agar dimulai dalam mode Voucher
    switchToVoucherMode();

    // Cek status login dari variabel Mikrotik
    const isLoggedIn = document.getElementById('mikrotik-logged-in').value === 'yes';
    const errorMsg = document.getElementById('mikrotik-error').value;

    if (isLoggedIn) {
        loginSection.style.display = 'none';
        statusSection.style.display = 'block';
        document.getElementById('status-uptime').innerText = document.getElementById('mikrotik-uptime').value;
        document.getElementById('status-bytes-in').innerText = document.getElementById('mikrotik-bytes-in').value;
        document.getElementById('status-bytes-out').innerText = document.getElementById('mikrotik-bytes-out').value;
    } else {
        if (errorMsg) {
            const errorContainer = document.getElementById('error-message');
            const errorText = document.getElementById('error-text');
            errorText.innerText = errorMsg;
            errorContainer.style.display = 'flex';
        }
    }

    // --- Fungsionalitas Tambahan (Tidak Berubah) ---

    // 1. Logika Navigasi Tab
    const tabs = document.querySelectorAll('.nav-tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const tabIndicator = document.querySelector('.tab-indicator');
    tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            tabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById(tab.dataset.tab + '-content').classList.add('active');
            tabIndicator.style.left = tab.offsetLeft + 'px';
            tabIndicator.style.width = tab.offsetWidth + 'px';
        });
    });

    // 2. Jam dan Tanggal Digital
    function updateClock() {
        const now = new Date();
        const timeEl = document.getElementById('current-time');
        const dateEl = document.getElementById('current-date');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');
        if(timeEl) timeEl.innerText = `${hours}:${minutes}:${seconds}`;
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        if(dateEl) dateEl.innerText = now.toLocaleDateString('id-ID', options);
    }
    if (document.getElementById('current-time')) {
        setInterval(updateClock, 1000);
        updateClock();
    }
    
    // 3. Update Tahun di Footer
    const yearSpan = document.getElementById('current-year');
    if(yearSpan) yearSpan.innerText = new Date().getFullYear();
});
</script>

</body>
</html>
